<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>차량 운행일지</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <header>
            <h1>차량 운행일지</h1>
            <p>간편하게 기록하고 관리하세요</p>
        </header>

        <main>
            <!-- Settings Section -->
            <section class="card settings-section">
                <div class="form-group">
                    <label for="initialDistance">기본 누적거리 (차량의 현재 총 주행거리)</label>
                    <div class="input-with-icon">
                        <input type="number" id="initialDistance" placeholder="예: 0" min="0">
                        <button type="button" id="cameraBtn" class="btn-icon" title="사진으로 입력">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"></path><circle cx="12" cy="13" r="3"></circle></svg>
                        </button>
                    </div>
                    <p class="help-text">첫 운행 기록의 기준이 되는 거리입니다. 카메라 버튼을 눌러 계기판 사진을 분석할 수 있습니다.</p>
                </div>
                <input type="file" id="cameraInput" accept="image/*" style="display: none;">
                
                <!-- OCR Menu Modal -->
                <div id="ocrMenu" class="modal-overlay" style="display: none;">
                    <div class="modal-content">
                        <h3>사진 선택</h3>
                        <div class="modal-buttons">
                            <button id="captureBtn" class="btn-modal">📷 직접 촬영</button>
                            <button id="galleryBtn" class="btn-modal">🖼️ 갤러리에서 선택</button>
                            <button id="cancelOcrBtn" class="btn-modal btn-cancel">취소</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Input Form -->
            <section class="card input-section">
                <h2>새 운행 기록</h2>
                <form id="logForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="date">운행일자</label>
                            <input type="date" id="date" required>
                        </div>
                        <div class="form-group">
                            <label for="day">요일</label>
                            <input type="text" id="day" readonly placeholder="자동 입력">
                        </div>
                        <div class="form-group">
                            <label for="distance">주행거리 (km)</label>
                            <input type="number" id="distance" min="0" required placeholder="예: 50">
                        </div>
                        <div class="form-group">
                            <label for="cumulative">누적거리 (km)</label>
                            <input type="number" id="cumulative" readonly placeholder="자동 계산">
                        </div>
                    </div>

                    <div class="form-divider">운행 구간</div>

                    <div class="route-grid">
                        <div class="form-group">
                            <label for="start">출발지</label>
                            <input type="text" id="start" required placeholder="출발지" lang="ko" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="via">경유지</label>
                            <input type="text" id="via" placeholder="(선택)" lang="ko" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="end">도착지</label>
                            <input type="text" id="end" required placeholder="도착지" lang="ko" autocomplete="off">
                        </div>
                    </div>

                    <button type="submit" class="btn-primary">기록 저장</button>
                </form>
            </section>

            <!-- Data Table -->
            <section class="card list-section">
                <div class="section-header">
                    <h2>운행 내역</h2>
                    <div class="button-group">
                        <button id="realExportBtn" class="btn-secondary">데이터 내보내기</button>
                        <button id="importBtn" class="btn-secondary">데이터 불러오기</button>
                        <button id="resetBtn" class="btn-secondary">초기화</button>
                        <input type="file" id="importFile" accept=".json" style="display: none;">
                    </div>
                </div>
                <div class="table-responsive">
                    <div class="history-container">
                        <table class="log-table">
                            <thead>
                                <tr>
                                    <th>날짜</th>
                                    <th>요일</th>
                                    <th>주행(km)</th>
                                    <th>누적(km)</th>
                                    <th>구간</th>
                                    <th>삭제</th>
                                </tr>
                            </thead>
                            <tbody id="logTableBody">
                                <!-- Rows will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="script.js"></script>
</body>

</html>